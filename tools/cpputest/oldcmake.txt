cmake_minimum_required(VERSION 3.27.1)

project(arm_cpputest)

# add_subdirectory(../../third_party/cpputest/src/CppUTest)
set(CPPUTEST_PROJECT_DIR ../../third_party/cpputest)

add_library(arm_cpputest STATIC
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/CommandLineArguments.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/MemoryLeakWarningPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestHarness_c.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestRegistry.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/CommandLineTestRunner.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/SimpleString.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/SimpleStringInternalCache.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestMemoryAllocator.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestResult.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/JUnitTestOutput.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TeamCityTestOutput.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestFailure.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestOutput.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/MemoryLeakDetector.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestFilter.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/TestTestingFixture.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/SimpleMutex.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTest/Utest.cpp
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/CommandLineArguments.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/PlatformSpecificFunctions.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestMemoryAllocator.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/CommandLineTestRunner.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/PlatformSpecificFunctions_c.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestOutput.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/CppUTestConfig.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/SimpleString.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/SimpleStringInternalCache.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/JUnitTestOutput.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TeamCityTestOutput.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/StandardCLibrary.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestRegistry.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/MemoryLeakDetector.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestFailure.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestResult.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/MemoryLeakDetectorMallocMacros.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestFilter.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestTestingFixture.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/MemoryLeakDetectorNewMacros.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestHarness.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/Utest.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/MemoryLeakWarningPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/TestHarness_c.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/UtestMacros.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTest/SimpleMutex.h
)

target_sources(arm_cpputest
    PUBLIC
        ${CPPUTEST_PROJECT_DIR}/src/Platforms/armcc/UtestPlatform.cpp
)

target_include_directories(arm_cpputest
    PUBLIC
        ${CPPUTEST_PROJECT_DIR}/include
)

add_library(arm_cpputestext STATIC
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/CodeMemoryReportFormatter.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/GTest.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/IEEE754ExceptionsPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MemoryReporterPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockFailure.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockSupportPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockActualCall.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockSupport_c.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MemoryReportAllocator.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockExpectedCall.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockNamedValue.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/OrderedTest.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MemoryReportFormatter.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockExpectedCallsList.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockSupport.cpp
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/CodeMemoryReportFormatter.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/IEEE754ExceptionsPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MemoryReportAllocator.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockExpectedCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockCheckedExpectedCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockExpectedCallsList.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupportPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MemoryReportFormatter.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockFailure.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupport.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupport_c.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GMock.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GTest.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GTestSupport.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MemoryReporterPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/OrderedTest.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GTestConvertor.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockActualCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockCheckedActualCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockNamedValue.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupport.h
)

target_include_directories(arm_cpputestext
    PUBLIC
        ${CPPUTEST_PROJECT_DIR}/include
)

add_library(arm_platform STATIC
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/CodeMemoryReportFormatter.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/GTest.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/IEEE754ExceptionsPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MemoryReporterPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockFailure.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockSupportPlugin.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockActualCall.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockSupport_c.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MemoryReportAllocator.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockExpectedCall.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockNamedValue.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/OrderedTest.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MemoryReportFormatter.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockExpectedCallsList.cpp
        ${CPPUTEST_PROJECT_DIR}/src/CppUTestExt/MockSupport.cpp
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/CodeMemoryReportFormatter.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/IEEE754ExceptionsPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MemoryReportAllocator.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockExpectedCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockCheckedExpectedCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockExpectedCallsList.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupportPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MemoryReportFormatter.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockFailure.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupport.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupport_c.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GMock.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GTest.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GTestSupport.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MemoryReporterPlugin.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/OrderedTest.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/GTestConvertor.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockActualCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockCheckedActualCall.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockNamedValue.h
        ${CPPUTEST_PROJECT_DIR}/include/CppUTestExt/MockSupport.h
)

target_include_directories(arm_platform
    PUBLIC
        ${CPPUTEST_PROJECT_DIR}/include
)